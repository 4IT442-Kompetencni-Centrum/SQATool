@import views.data.MenuDto
@import views.data.PartnerDto
@import service.ActionsEnum
@import service.SecurityService
@(partners: List[PartnerDto], submenu: List[MenuDto], numberOfPages: Int, activePage: Integer, user: User)
@main("Partneři", "partners", submenu){
<script src="@routes.Assets.at("javascripts/partners/partners.js")" type="text/javascript"></script>
	<h1>Partneři</h1>
	<table class="table table-striped table-hover">
		<tr>
			<th>#</th>
			<th>Název</th>
			<th colspan='2'>Operace</th>
		</tr>
		@for(index <- 0 until partners.size) {
		<tr>
			<td>@(index+1)</td>
			<td><a href="@routes.PartnerController.detail(partners(index).getPartnerId())">@Html(partners(index).getName())</a></td>
			<td>
			@if(SecurityService.hasAccess(user, ActionsEnum.PARTNER_EDIT)) {
			<a href="@routes.PartnerController.edit(partners(index).getPartnerId())" class="btn btn-default">
  				<span class="glyphicon glyphicon-cog" aria-hidden="true"></span> 
			</a>
			}
			@if(SecurityService.hasAccess(user, ActionsEnum.PARTNER_DELETE)) {
			<button data-partnerName="@Html(partners(index).getName())" data-partnerId="@partners(index).getPartnerId()" data-partnerDeleteUrl="@routes.PartnerController.delete(partners(index).getPartnerId())" class="btn btn-danger deleteButton">
  				<span class="glyphicon glyphicon-trash" aria-hidden="true"></span> 
			</button>
			}
			</td>
		</tr>
		}
	</table>
	
	<ul class="pagination">
	@for(page <- 0 until numberOfPages) {
		<li @if(page == activePage) { class="active" }><a href="@routes.PartnerController.showAll(page)">@(page+1)</a></li>
	}
	</ul>

<div id="deleteWarning" class="modal fade" tabindex="-1"
	role="dialog" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h3>Jste si jistý?</h3>
			</div>
			<div class="modal-body">
				<p>Opravdu si přejete smazat partnera <span class="partnerName"></span> s ID <span class="partnerID"></span>?
				</p>
			</div>
			<div class="modal-footer">
				<button class="btn btn-success" id="deleteCancel">Ne</button>
				<a href="genegatedValue" class="btn btn-danger deleteConfirm">Ano</a>
			</div>
		</div>
	</div>
</div>
}